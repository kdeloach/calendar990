<!DOCTYPE html>
<html>
  <head>
    <title>Azavea Room Schedule</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="rooms.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
    <script type="text/javascript" src="main.js"></script>
  </head>
<body>
<script type="javascript/template" id="tmpl-index">
<p class="now"><%- formatDate(data.now) %></p>
<ul>
<% _.each(data.rooms, function(room) { %>
    <li>
        <div class="room-name"><a href="#<%- room.id %>"><%- room.name %></a></div>
        <%= formatEvent(room.getCurrentEvent() || room.getNextEvent()) %>
    </li>
<% }) %>
</ul>
<p class="updated-at">Last updated at <%- formatDate(data.updatedAt) %></p>
</script>

<script type="javascript/template" id="tmpl-room">
<div class="now"><%- formatDate(data.now) %></div>
<div class="header">
    <h1><%- data.name %></h1>
    <% _.each(data.events, function(evt) { %>
        <%= formatEvent(evt) %>
    <% }) %>
    <p class="pager<%- (data.events.length === 0 ? ' hide' : '') %>">
        <% if (data.eventIndex > 0) { %>
            <a href="javascript:;" class="prev">Prev</a>
        <% } %>
        <% if (data.eventIndex < data.events.length - 1) { %>
            <a href="javascript:;" class="next">Next</a>
        <% } %>
    </p>
</div>
<div class="back"><a href="#">Back</a></div>
</script>

<script type="javascript/template" id="tmpl-event">
<div class="event<%- (data.isCurrent ? ' current' :
                      data.isNext ? ' next' : '') %>">
    <span class="summary">
        <%- data.isNext ? 'Next: ' : '' %>
        <%- data.summary %>
    </span>
    <span class="time" title="<%- formatDate(data.startTime) %> &ndash; <%- formatTime(data.endTime) %>
<%- data.description %>">
    <%- formatTime(data.startTime) %> &ndash;
    <%- formatTime(data.endTime) %>
    </span>
    <a href="<%- data.htmlLink %>" target="new">Link</a>
</div>
</script>
</body>
</html>
